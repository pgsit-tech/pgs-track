# PGS Tracking System - Cloudflare Workers 配置
# 更新日期: 2025-01-03

name = "pgs-tracking-proxy"
main = "workers/proxy.js"
compatibility_date = "2024-01-01"
compatibility_flags = ["nodejs_compat"]

# 生产环境配置
[env.production]
name = "pgs-tracking-proxy"

# 环境变量
[vars]
ENVIRONMENT = "production"
# 由于已屏蔽备选API，只使用官网API
OFFICIAL_API_URL = "http://cbel.pgs-log.com/edi/pubTracking"
# CORS允许的域名
CORS_ORIGINS = "https://pgs-track.pages.dev,http://localhost:8080,http://localhost:3000,http://localhost:8000,http://127.0.0.1:8080"
# 管理员Token（用于配置更新）
ADMIN_TOKEN = "admin-token-pgs-2025"

# KV存储绑定（用于存储配置）
[[kv_namespaces]]
binding = "CONFIG_KV"
id = "your-kv-namespace-id"
preview_id = "your-preview-kv-namespace-id"

# 开发环境配置
[env.development]
name = "pgs-tracking-proxy-dev"

[env.development.vars]
ENVIRONMENT = "development"
OFFICIAL_API_URL = "http://cbel.pgs-log.com/edi/pubTracking"
CORS_ORIGINS = "http://localhost:8080,http://localhost:3000,http://localhost:8000,http://127.0.0.1:8080"
ADMIN_TOKEN = "admin-token-dev"

# 开发环境KV存储
[[env.development.kv_namespaces]]
binding = "CONFIG_KV"
id = "your-dev-kv-namespace-id"
preview_id = "your-dev-preview-kv-namespace-id"
